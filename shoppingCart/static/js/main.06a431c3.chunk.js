(this.webpackJsonpshopcart=this.webpackJsonpshopcart||[]).push([[0],{39:function(t,e,n){},41:function(t,e,n){},64:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(11),o=n.n(a),s=(n(39),function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),c(t),r(t),a(t),o(t)}))}),i=n(18),u=n(10),l=n(13),j=n.n(l),d=n(22),b=n(8),O=n(17),f=n(16),h=n(19),p=n(34),x=n(24),g=n(15),v=n(33),m=(n(41),n(42),n(23)),C=n.n(m),y=n(2),E=[],k=function(t,e){switch(e.type){case"FETCH_INIT":return Object(u.a)(Object(u.a)({},t),{},{isLoading:!0,isError:!1});case"FETCH_SUCCESS":return Object(u.a)(Object(u.a)({},t),{},{isLoading:!1,isError:!1,data:e.payload});case"FETCH_FAILURE":return Object(u.a)(Object(u.a)({},t),{},{isLoading:!1,isError:!0});default:throw new Error}},S=function(t){var e=Object(c.useState)(E),n=Object(b.a)(e,2),r=n[0],a=n[1],o=Object(c.useState)([]),s=Object(b.a)(o,2),u=s[0],l=s[1],m=Object(c.useState)(0),S=Object(b.a)(m,2),F=(S[0],S[1],Object(c.useState)("http://localhost:1337/products")),T=Object(b.a)(F,2),w=T[0],L=T[1],I=function(t,e){var n=Object(c.useState)(t),r=Object(b.a)(n,2),a=r[0],o=r[1],s=Object(c.useReducer)(k,{isLoading:!1,isError:!1,data:e}),i=Object(b.a)(s,2),u=i[0],l=i[1];return console.log("useDataApi called"),Object(c.useEffect)((function(){console.log("useEffect Called");var t=!1;return function(){var e=Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l({type:"FETCH_INIT"}),e.prev=1,e.next=4,C()(a);case 4:n=e.sent,console.log("FETCH FROM URl"),t||(l({type:"FETCH_SUCCESS",payload:n.data}),n.data.map((function(t){return E.push(t)}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t||l({type:"FETCH_FAILURE"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()(),function(){t=!0}}),[a]),[u,o]}("http://localhost:1337/products",{data:[]}),H=Object(b.a)(I,2),R=H[0],_=R.data,P=(R.isLoading,R.isError,H[1]);Object(c.useEffect)((function(){a([].concat(E))}),[_]),console.log("Rendering Products ".concat(JSON.stringify(_)));var U=function(t){var e=t.target.name,n=r.filter((function(t){return t.name==e})),c=n[0].instock;c>0?(c--,l([].concat(Object(i.a)(u),Object(i.a)(n)))):c=c,n[0].instock=c,console.log("add to Cart ".concat(JSON.stringify(n))),P(w)};console.log(_);var J=r.map((function(t,e){var n="https://picsum.photos/id/"+(e+Math.floor(100*Math.random()))+"/50/50";return console.log(n),Object(y.jsxs)("li",{children:[Object(y.jsx)(v.a,{src:n,width:70,roundedCircle:!0}),Object(y.jsxs)(h.a,{variant:"primary",size:"large",children:[t.name,Object(y.jsx)("br",{}),"Cost:$".concat(t.cost),Object(y.jsx)("br",{}),"Instock:".concat(t.instock)]}),Object(y.jsx)("input",{name:t.name,type:"submit",onClick:U})]},e)})),M=u.map((function(t,e){return Object(y.jsxs)(O.a,{children:[Object(y.jsx)(O.a.Header,{children:Object(y.jsx)(f.a.Toggle,{as:h.a,variant:"link",eventKey:1+e,children:t.name})}),Object(y.jsx)(f.a.Collapse,{onClick:function(){return function(t){u[t].instock++;var e=u.filter((function(e,n){return t!=n}));l(e)}(e)},eventKey:1+e,children:Object(y.jsxs)(O.a.Body,{children:["$ ",t.cost," from ",t.country]})})]},e)})),N=function(){var t=A();return{final:u.map((function(t,e){return Object(y.jsx)("div",{index:e,children:t.name},e)})),total:t}},A=function(){var t=u.map((function(t){return t.cost})).reduce((function(t,e){return t+e}),0);return console.log("total updated to ".concat(t)),t},B=function(){var t=Object(d.a)(j.a.mark((function t(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C()(e);case 2:t.sent.data.map((function(t){var e=t.name,n=t.instock;r.filter((function(t){return t.name==e}))[0].instock+=n,a(Object(i.a)(r))}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(y.jsxs)(p.a,{children:[Object(y.jsxs)(x.a,{children:[Object(y.jsxs)(g.a,{children:[Object(y.jsx)("h1",{children:"Product List"}),Object(y.jsx)("ul",{style:{listStyleType:"none"},children:J})]}),Object(y.jsxs)(g.a,{children:[Object(y.jsx)("h1",{children:"Cart Contents"}),Object(y.jsx)(f.a,{children:M})]}),Object(y.jsxs)(g.a,{children:[Object(y.jsx)("h1",{children:"CheckOut "}),Object(y.jsxs)(h.a,{onClick:function(){l([])},children:["CheckOut $ ",N().total]}),Object(y.jsxs)("div",{children:[" ",N().total>0&&N().final," "]})]})]}),Object(y.jsx)(x.a,{children:Object(y.jsxs)("form",{onSubmit:function(t){B("".concat(w)),console.log("Restock called on ".concat(w)),t.preventDefault()},children:[Object(y.jsx)("input",{type:"text",value:w,onChange:function(t){return L(t.target.value)}}),Object(y.jsx)("button",{type:"submit",children:"ReStock Products"})]})})]})};o.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(S,{})}),document.getElementById("root")),s()}},[[64,1,2]]]);
//# sourceMappingURL=main.06a431c3.chunk.js.map